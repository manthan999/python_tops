{% extends "layout.html" %}

{% block title %}Register{% endblock title %}

{% block h1 %}
    <h1>Register</h1>
{% endblock h1 %}

{% block main %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <form class="card p-4 shadow gap-2">
                {% csrf_token %}
                <input type="text" id="userName" class="form-control" placeholder="Username" >
                <input type="text" id="userEmail" class="form-control" placeholder="Email Address">
                <input type="text" id="userPassword" class="form-control" placeholder="Password">
                <button type="button" id="submitBtn" class="btn btn-primary" onclick="registerUser()">Submit</button>
            </form>
        </div>
    </div>
</div>
{% endblock main%}

{% block script %}
<script>
    function registerUser(){
        const userName = $("#userName").val();
        const userEmail = $("#userEmail").val();
        const userPassword = $("#userPassword").val();
        const csrf_token = $("[name='csrfmiddlewaretoken']").val();

        $.post("register-user", {
            "csrfmiddlewaretoken": csrf_token,
            "userName": userName,
            "userEmail": userEmail,
            "userPassword": userPassword,
        }, 
        function(response){
            alert(response.message);
            window.location.href = "login";
        });
    }
</script>
{% endblock script %}